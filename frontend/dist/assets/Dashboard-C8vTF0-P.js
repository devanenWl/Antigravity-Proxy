import{c as v,_ as $,a as F,r as h,n as I,U as E,p as L,b as c,d as e,e as t,g as r,f as d,F as M,q as B,m as H,l as g,t as p,s as K,x as Q,o as n,k as j,y as D,h as k,z as G,A as J}from"./index-CDzEZqfw.js";import{C as O,c as W}from"./clipboard-BYc1WW6g.js";import{C as T}from"./Card-Cto2nSnp.js";import{B as m}from"./Button-CtfZAKL_.js";import{R as X,B as q}from"./Badge-DoFE7pgC.js";import{P as Y}from"./plus-BE-yyuUG.js";/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=v("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=v("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=v("CoinsIcon",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=v("MessageSquareIcon",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=v("TrendingDownIcon",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=v("TrendingUpIcon",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),ts={class:"dashboard"},ls={class:"page-header"},ns={class:"page-actions"},is={class:"stats-grid"},rs={class:"stat-content"},cs={class:"stat-value"},ds={class:"stat-label"},us={class:"dashboard-grid"},ps={key:0,class:"model-usage"},vs={class:"usage-header"},ys={class:"usage-model"},gs={class:"usage-count"},fs={class:"usage-bar"},hs={key:1,class:"empty-state"},ks={class:"quick-actions"},ms={class:"api-info"},_s={class:"info-row"},bs={class:"info-code"},ws={class:"info-row"},Cs={class:"info-row"},zs={__name:"Dashboard",setup(xs){const U=H(),y=F(),l=h({}),_=h(!0),f=h(!1),b=I(()=>window.location.origin),R=I(()=>{var a,s,u,o,i,z,x;return[{label:"活跃账号",value:`${((a=l.value.accounts)==null?void 0:a.active)||0}/${((s=l.value.accounts)==null?void 0:s.total)||0}`,icon:E,color:"blue",change:null},{label:"今日请求",value:C(((u=l.value.today)==null?void 0:u.requests)||0),icon:A,color:"green",change:((o=l.value.today)==null?void 0:o.requestsChange)||null},{label:"今日Token",value:C(((i=l.value.today)==null?void 0:i.tokens)||0),icon:es,color:"yellow",change:((z=l.value.today)==null?void 0:z.tokensChange)||null},{label:"平均延迟",value:`${((x=l.value.today)==null?void 0:x.avgLatency)||0}ms`,icon:ss,color:"purple",change:null}]}),w=async()=>{_.value=!0;try{const a=await Q();l.value=a.data||a}catch{y.error("加载仪表盘失败")}finally{_.value=!1}},N=async()=>{f.value=!0;try{await w(),y.success("仪表盘已刷新")}catch{y.error("刷新失败")}finally{f.value=!1}},P=async()=>{await W(`${b.value}/v1/chat/completions`)?y.success("API端点已复制"):y.error("复制失败，请手动复制")},C=a=>a>=1e6?(a/1e6).toFixed(1)+"M":a>=1e3?(a/1e3).toFixed(1)+"K":String(a),S=a=>{var u;const s=((u=l.value.modelUsage)==null?void 0:u.reduce((o,i)=>o+i.count,0))||1;return Math.round(a/s*100)},V=a=>({blue:"stat-blue",green:"stat-green",yellow:"stat-yellow",purple:"stat-purple"})[a]||"stat-blue";return L(w),(a,s)=>{const u=K("router-link");return n(),c("div",ts,[e("div",ls,[s[2]||(s[2]=e("h1",{class:"page-title"},"仪表盘",-1)),e("div",ns,[t(m,{variant:"secondary",loading:f.value,onClick:N},{default:r(()=>[t(d(X),{size:16}),s[1]||(s[1]=e("span",{class:"hide-mobile"},"刷新",-1))]),_:1},8,["loading"])])]),e("div",is,[(n(!0),c(M,null,B(R.value,o=>(n(),c("div",{key:o.label,class:"stat-card"},[e("div",{class:D(["stat-icon",V(o.color)])},[(n(),k(G(o.icon),{size:20}))],2),e("div",rs,[e("span",cs,p(o.value),1),e("span",ds,p(o.label),1)]),o.change!==null?(n(),c("div",{key:0,class:D(["stat-change",o.change>=0?"positive":"negative"])},[o.change>=0?(n(),k(d(as),{key:0,size:14})):(n(),k(d(os),{key:1,size:14})),e("span",null,p(Math.abs(o.change))+"%",1)],2)):j("",!0)]))),128))]),e("div",us,[t(T,{title:"模型使用",class:"model-card"},{default:r(()=>{var o;return[(o=l.value.modelUsage)!=null&&o.length?(n(),c("div",ps,[(n(!0),c(M,null,B(l.value.modelUsage,i=>(n(),c("div",{key:i.model,class:"usage-item"},[e("div",vs,[e("span",ys,p(i.model),1),e("span",gs,p(i.count),1)]),e("div",fs,[e("div",{class:"usage-progress",style:J({width:S(i.count)+"%"})},null,4)])]))),128))])):(n(),c("div",hs,[t(d(A),{size:40,class:"empty-icon"}),s[3]||(s[3]=e("p",null,"暂无使用数据",-1))]))]}),_:1}),t(T,{title:"快捷操作",class:"actions-card"},{footer:r(()=>[t(u,{to:"/logs",class:"view-logs-link"},{default:r(()=>[s[12]||(s[12]=g(" 查看全部日志 ",-1)),t(d(Z),{size:14})]),_:1})]),default:r(()=>[e("div",ks,[t(m,{variant:"primary",onClick:s[0]||(s[0]=o=>d(U).push("/accounts"))},{default:r(()=>[t(d(Y),{size:16}),s[4]||(s[4]=g(" 添加账号 ",-1))]),_:1}),t(m,{variant:"secondary",onClick:P},{default:r(()=>[t(d(O),{size:16}),s[5]||(s[5]=g(" 复制端点 ",-1))]),_:1})]),e("div",ms,[e("div",_s,[s[6]||(s[6]=e("span",{class:"info-label"},"API 端点",-1)),e("code",bs,p(b.value)+"/v1/...",1)]),s[10]||(s[10]=e("div",{class:"info-divider"},null,-1)),e("div",ws,[s[7]||(s[7]=e("span",{class:"info-label"},"成功率",-1)),t(q,{variant:"success",dot:""},{default:r(()=>{var o;return[g(p(((o=l.value.today)==null?void 0:o.successRate)||100)+"% ",1)]}),_:1})]),s[11]||(s[11]=e("div",{class:"info-divider"},null,-1)),e("div",Cs,[s[9]||(s[9]=e("span",{class:"info-label"},"运行状态",-1)),t(q,{variant:"success",dot:""},{default:r(()=>[...s[8]||(s[8]=[g(" 正常运行 ",-1)])]),_:1})])])]),_:1})])])}}},As=$(zs,[["__scopeId","data-v-15dc8469"]]);export{As as default};
